{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2026-01-26T00:00:00.000Z",
  "__export_source": "insomnia.desktop.app:2023.5.8",
  "resources": [
    {
      "_id": "wrk_semaphore",
      "_type": "workspace",
      "name": "Semaphore API",
      "description": "Semaphore REST API collection (Envoy on :8080).",
      "scope": "collection"
    },
    {
      "_id": "env_base",
      "_type": "environment",
      "parentId": "wrk_semaphore",
      "name": "Base Environment",
      "data": {
        "baseUrl": "http://localhost:8080",
        "accessToken": "",
        "refreshToken": "",
        "userId": "",
        "schoolId": "11111111-1111-1111-1111-111111111111",
        "courseId": "11111111-1111-1111-1111-111111111114",
        "classroomId": "11111111-1111-1111-1111-111111111113",
        "studentGroupId": "11111111-1111-1111-1111-111111111115",
        "adminId": "22222222-2222-2222-2222-222222222221",
        "teacherId": "22222222-2222-2222-2222-222222222222",
        "studentId": "22222222-2222-2222-2222-222222222223",
        "devId": "22222222-2222-2222-2222-222222222224",
        "signatureId": "33333333-3333-3333-3333-333333333332",
        "deviceId": "demo-device-1",
        "devicePublicKey": "demo-public-key",
        "signatureDate": 1769331900
      }
    },
    {
      "_id": "env_admin",
      "_type": "environment",
      "parentId": "env_base",
      "name": "Admin",
      "data": {
        "email": "admin@demo.local",
        "password": "dev-password",
        "accessToken": "",
        "refreshToken": ""
      }
    },
    {
      "_id": "env_teacher",
      "_type": "environment",
      "parentId": "env_base",
      "name": "Teacher",
      "data": {
        "email": "teacher@demo.local",
        "password": "dev-password",
        "accessToken": "",
        "refreshToken": ""
      }
    },
    {
      "_id": "env_student",
      "_type": "environment",
      "parentId": "env_base",
      "name": "Student",
      "data": {
        "email": "student@demo.local",
        "password": "dev-password",
        "accessToken": "",
        "refreshToken": ""
      }
    },
    {
      "_id": "env_dev",
      "_type": "environment",
      "parentId": "env_base",
      "name": "Dev",
      "data": {
        "email": "dev@demo.local",
        "password": "dev-password",
        "accessToken": "",
        "refreshToken": ""
      }
    },
    {
      "_id": "grp_auth",
      "_type": "request_group",
      "parentId": "wrk_semaphore",
      "name": "Auth"
    },
    {
      "_id": "req_login",
      "_type": "request",
      "parentId": "grp_auth",
      "name": "Login (sets accessToken)",
      "method": "POST",
      "url": "{{ _.baseUrl }}/auth/login",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"{{ _.email }}\",\n  \"password\": \"{{ _.password }}\"\n}"
      },
      "authentication": {
        "type": "none"
      },
      "scripts": {
        "afterResponse": "const json = await insomnia.response.json();\nif (json?.access_token) {\n  await insomnia.environment.set('accessToken', json.access_token);\n}\nif (json?.refresh_token) {\n  await insomnia.environment.set('refreshToken', json.refresh_token);\n}\nif (json?.user?.id) {\n  await insomnia.environment.set('userId', json.user.id);\n}"
      }
    },
    {
      "_id": "req_refresh",
      "_type": "request",
      "parentId": "grp_auth",
      "name": "Refresh",
      "method": "POST",
      "url": "{{ _.baseUrl }}/auth/refresh",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"refresh_token\": \"{{ _.refreshToken }}\"\n}"
      },
      "authentication": {
        "type": "none"
      },
      "scripts": {
        "afterResponse": "const json = await insomnia.response.json();\nif (json?.access_token) {\n  await insomnia.environment.set('accessToken', json.access_token);\n}\nif (json?.refresh_token) {\n  await insomnia.environment.set('refreshToken', json.refresh_token);\n}"
      }
    },
    {
      "_id": "req_logout",
      "_type": "request",
      "parentId": "grp_auth",
      "name": "Logout",
      "method": "POST",
      "url": "{{ _.baseUrl }}/auth/logout",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"refresh_token\": \"{{ _.refreshToken }}\"\n}"
      },
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_jwks",
      "_type": "request",
      "parentId": "grp_auth",
      "name": "JWKS",
      "method": "GET",
      "url": "{{ _.baseUrl }}/.well-known/jwks.json",
      "authentication": {
        "type": "none"
      }
    },
    {
      "_id": "grp_identity",
      "_type": "request_group",
      "parentId": "wrk_semaphore",
      "name": "Auth-Identity"
    },
    {
      "_id": "req_students_school",
      "_type": "request",
      "parentId": "grp_identity",
      "name": "List Students by School",
      "method": "GET",
      "url": "{{ _.baseUrl }}/students/{{ _.schoolId }}?limit=5",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_get_student",
      "_type": "request",
      "parentId": "grp_identity",
      "name": "Get Student",
      "method": "GET",
      "url": "{{ _.baseUrl }}/student/{{ _.studentId }}",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_get_device",
      "_type": "request",
      "parentId": "grp_identity",
      "name": "Get Student Device",
      "method": "GET",
      "url": "{{ _.baseUrl }}/student/{{ _.studentId }}/device",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_put_device",
      "_type": "request",
      "parentId": "grp_identity",
      "name": "Put Student Device",
      "method": "PUT",
      "url": "{{ _.baseUrl }}/student/{{ _.studentId }}/device",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"demo-device-2\",\n  \"publicKey\": \"{{ _.devicePublicKey }}\"\n}"
      },
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "grp_academics",
      "_type": "request_group",
      "parentId": "wrk_semaphore",
      "name": "Academics"
    },
    {
      "_id": "req_get_schools",
      "_type": "request",
      "parentId": "grp_academics",
      "name": "List Schools",
      "method": "GET",
      "url": "{{ _.baseUrl }}/schools",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_get_school",
      "_type": "request",
      "parentId": "grp_academics",
      "name": "Get School",
      "method": "GET",
      "url": "{{ _.baseUrl }}/school/{{ _.schoolId }}",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_get_course",
      "_type": "request",
      "parentId": "grp_academics",
      "name": "Get Course",
      "method": "GET",
      "url": "{{ _.baseUrl }}/course/{{ _.courseId }}",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "grp_attendance",
      "_type": "request_group",
      "parentId": "wrk_semaphore",
      "name": "Attendance"
    },
    {
      "_id": "req_course_status",
      "_type": "request",
      "parentId": "grp_attendance",
      "name": "Get Course Status",
      "method": "GET",
      "url": "{{ _.baseUrl }}/course/{{ _.courseId }}/status",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_buzzlightyear",
      "_type": "request",
      "parentId": "grp_attendance",
      "name": "Get BuzzLightyear Code",
      "method": "GET",
      "url": "{{ _.baseUrl }}/signature/buzzlightyear",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_create_signature",
      "_type": "request",
      "parentId": "grp_attendance",
      "name": "Create Signature (student)",
      "method": "POST",
      "url": "{{ _.baseUrl }}/signature",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        },
        {
          "name": "X-Device-ID",
          "value": "{{ _.deviceId }}"
        }
      ],
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"date\": {{ _.signatureDate }},\n  \"course\": \"{{ _.courseId }}\",\n  \"status\": \"present\",\n  \"method\": \"flash\",\n  \"student\": \"{{ _.studentId }}\"\n}"
      },
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_get_signature",
      "_type": "request",
      "parentId": "grp_attendance",
      "name": "Get Signature",
      "method": "GET",
      "url": "{{ _.baseUrl }}/signature/{{ _.signatureId }}",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "req_list_signatures",
      "_type": "request",
      "parentId": "grp_attendance",
      "name": "List Signatures by Course",
      "method": "GET",
      "url": "{{ _.baseUrl }}/signatures?courseId={{ _.courseId }}&limit=10",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    },
    {
      "_id": "grp_beacon",
      "_type": "request_group",
      "parentId": "wrk_semaphore",
      "name": "Beacon"
    },
    {
      "_id": "req_list_beacons",
      "_type": "request",
      "parentId": "grp_beacon",
      "name": "List Beacons (dev)",
      "method": "GET",
      "url": "{{ _.baseUrl }}/dev/beacons",
      "authentication": {
        "type": "bearer",
        "token": "{{ _.accessToken }}"
      }
    }
  ]
}
